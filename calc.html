<!DOCTYPE html>
<html>
<head>
<title>Calculadora</title>
<meta charset="utf-8">
<script
	src="https://code.jquery.com/jquery-2.2.4.min.js"
	integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44="
	crossorigin="anonymous"></script>
<style type="text/css">

* {
	margin: 0px;
	padding: 0px;
}

header, section, footer, aside, nav, article, figure, figcaption, hgroup {
	display: block;
}

body {
	text-align: center;
	background-color: darkolivegreen;
	font-family: Verdana, Geneva, sans-serif;
}

#agrupar {
	width: 960px;
	margin: 15px auto;
	padding: 15px;
	border-radius: 50px;
	text-align: center;
	background-color: ghostwhite;
}

header {
	padding: 15px;
}

div.calculadora {
	width: 350px;
	margin: 10px auto;
	padding: 15px;
	border: 1px solid black;
	border-radius: 30px;
	box-shadow: 10px 10px 8px gray;
	background-color: silver;
}

h2 {
	font-size: 1.2em;
	color: darkblue;
	text-align: left;
	margin: 10px 15px;
}

.calculadora h2 {
	text-align: center;
}

#entradadatos, #resultado {
	padding: 5px;
	text-align: right;
	font-size: 1.2em;
}

.boton {
	width: 35px;
	height: 35px;
	padding: 2px;
}

.boton_extendido {
	width: 115px;
	height: 35px;
	padding: 2px;
}

p {
	margin: 15px;
	text-align: justify;
}

footer span {
	text-align: center;
	color: darkblue;
}

footer {
	padding: 15px 0px;
}

</style>
<script type="text/javascript">
	var fecha = new Date();
	var saludo = "";

	var entradadatos;
	var acumulador = 0;
	var operador = "";

	// Según el operador pasado se realiza la operación correspondiente
	var operacion = {
	    '+': function(a, b) 	{ return a + b },
	    '-': function(a, b) 	{ return a - b },
	    '*': function(a, b) 	{ return a * b },
	    '/': function(a, b) 	{ return a / b },
	    '^': function(a, b) 	{ return Math.pow(a, b) },
	    'cuadr': function(a, b)	{ return a * a},
	    'inv': function(a, b) 	{ return 1 / a},
	    'raiz': function(a, b) 	{ return Math.sqrt(a) },
	    'ent': function(a, b) 	{ 
	    							if (+a > 0) { return Math.floor(a) }
	    							else { return -Math.ceil(a) }
	    						},
	    '2elev': function(a, b) { return Math.pow(2, a) },
	    'fact': function(a, b) { b = 1; for (var cont = a; cont > 0; cont--) { b = b * cont;}; return b; }, 
	    'reset': function(a, b) { acumulador = 0; return 0; }
	};

	// Genera saludo para título de la página web
	if      (fecha.getHours() < 7)  { saludo = "Buenas noches";}
	else if (fecha.getHours() < 12) { saludo = "Buenos días";}
	else if (fecha.getHours() < 21) { saludo = "Buenas tardes";}
	else                            { saludo = "Buenas noches";}

$(function() 
	{ 
		//Título de la página web
		$("#titulo").html(saludo + ", bienvenido a la calculadora de Silvio Oreste Topa");

		//Inicia entradadatos y le pasa el foco
		entradadatos = $("#entradadatos");
		entradadatos.focus();

		//Definición de Eventos
		entradadatos.on("click", function()	{ entradadatos.val(""); }); // Evento click vacía input #entradadatos
		$("#boton_suma").on("click", function()	{ dato(); operador = "+"; }); // Evento click suma
		$("#boton_resta").on("click", function() { dato(); operador = "-"; }); // Evento click resta
		$("#boton_multipl").on("click", function() { dato(); operador = "*"; }); // Evento click multiplicación
		$("#boton_division").on("click", function() { dato(); operador = "/"; }); // Evento click división
		$("#boton_elevado").on("click", function() { dato(); operador = "^"; }); // Evento click elevado
		$("#boton_igual").on("click", function() { resultado(); }); // Evento click resultado()
		$("#boton_cuadrado").on("click", function() { dato(); operador = "cuadr"; resultado(); operador = "reset"; }); // Evento click elevado
		$("#boton_inverso").on("click", function() { dato(); operador = "inv"; resultado(); operador = "reset"; }); // Evento click inverso
		$("#boton_raiz").on("click", function() { dato(); operador = "raiz"; resultado(); operador = "reset"; }); // Evento click inverso
		$("#boton_2elev").on("click", function() { dato(); operador = "2elev"; resultado(); operador = "reset"; }); // Evento click 2 elevado a la n
		$("#boton_fact").on("click", function() { dato(); operador = "fact"; resultado(); operador = "reset"; }); // Evento click 2 elevado a la n
		$("#boton_pent").on("click", function() { dato(); operador = "ent"; resultado(); operador = "reset"; }); // Evento click entero
		$("#boton_sumatorio").on("click", function() { sumatorio(); operador = "reset"; }); // Evento click sumatorio
		$("#boton_productorio").on("click", function() { productorio(); operador = "reset"; }); // Evento click productoriotorio

		// Función que realiza los cálculos
		function calcular() {
			acumulador = operacion[operador](+acumulador, +entradadatos.val());
			entradadatos.focus();
			return +acumulador;
		}

		function dato() {
			if (entradadatos.val() === "") {
				alert("Error: debe ingresar un número.");
			}
			else if (isNaN(entradadatos.val())) { alert("Error: no ingresó un número."); entradadatos.val(""); }
			else { 
				acumulador = +entradadatos.val();
				entradadatos.val("");
				entradadatos.focus();
				desactivar();
			}
		}

		function resultado() {
			entradadatos.val(calcular());
			if (isNaN(entradadatos.val())) { alert("Error: no ingresó un número."); entradadatos.val(""); }
			acumulador = 0;
			activar();			
		}

		function sumatorio() {
			var lista = entradadatos.val().split(",");
			var indice = 0;
			var sumador = 0;

			while (indice < lista.length) { sumador += +lista[indice++]; }
			entradadatos.val(sumador);
			if (isNaN(entradadatos.val())) { alert("Error: los datos ingresados son incorrectos."); entradadatos.val(""); }
			entradadatos.focus();
		}

		function productorio() {
			var lista = entradadatos.val().split(",");
			var indice = 0;
			var productor = 1;

			while (indice < lista.length) { productor *= +lista[indice++]; }
			entradadatos.val(productor);
			if (isNaN(entradadatos.val())) { alert("Error: los datos ingresados son incorrectos."); entradadatos.val(""); }
			entradadatos.focus();
		}		

		function desactivar() {
			$("[id^=boton_]").prop( "disabled", true );
			$("#boton_igual").prop( "disabled", false );
		}
		
		function activar() {
			$("[id^=boton_]").prop( "disabled", false );
		}


	})

</script>
</head>
<body>
<div id="agrupar">
	<header><h1 id="titulo"></h1></header>
	<div class="calculadora">
		<!--<p>Resultado: <input type="text" size="10" id="resultado"></p>-->
	  	<p><input type="text" size="25" id="entradadatos"></p>
	  	<div class="binarios">
	  	<h2>Operadores Binarios</h2>
	  		<button id="boton_suma" class="boton">+</button>
	  		<button id="boton_resta" class="boton">-</button>
	  		<button id="boton_multipl" class="boton">*</button>
	  		<button id="boton_division" class="boton">/</button>
	  		<button id="boton_elevado" class="boton"">x<sup>y</sup></button>
	  		<button id="boton_igual" class="boton_extendido">=</button>
	  	</div>
	  	<div class="unarios">
	  		<h2>Operadores Unarios</h2>
	  		<button id="boton_cuadrado" class="boton">x<sup>2</sup></button>
	  		<button id="boton_inverso" class="boton">1/x</button>
	  		<button id="boton_raiz" class="boton">&#8730;</button>
			<button id="boton_2elev" class="boton">2<sup>n</button>
	  		<button id="boton_fact" class="boton">n!</button>
	  		<button id="boton_pent" class="boton_extendido">Parte Entera de x</button>
	  	</div>
	  	<div class="n-narios">
	  		<h2>Operadores N-narios (CSV)</h2>
	  		<button id="boton_sumatorio" class="boton">&Sigma;x</button>
	  		<button id="boton_productorio" class="boton">&Pi;x</button>
	  	</div>	  	
	</div>
	<h2>Instrucciones de Uso</h2>
	<p>Para los operadores binarios, ingrese un valor, luego pulse el operador e ingrese el segundo valor. Presione el signo = para obtener el resultado.</p>
	<p>Para los operadores unarios, ingrese un valor y presione el operador para ver el resultado de la operación. No es necesario presionar el signo =, si lo hace la calculadora regresará 0.</p>
	<p>Para los operadores n-narios, ingrese una lista de valores separados por coma (,) y presione el operador para ver el resultado de la operación. No es necesario presionar el signo =, si lo hace la calculadora regresará 0.</p>
	<footer><span>Ejercicio final del Módulo 5 - Desarrollo en HTML5, CSS y JavaScript de Apps Web</span></footer>
</div>
</body>
</html>